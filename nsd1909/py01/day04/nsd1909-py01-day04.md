# nsd1909-py01-day04

## shutil模块

用于执行与文件系统相关的命令

```python
>>> import shutil
>>> f1 = open('/bin/ls', 'rb')
>>> f2 = open('/tmp/list3', 'wb')
>>> shutil.copyfileobj(f1, f2)
>>> f1.close()
>>> f2.close()

>>> shutil.copy('/etc/hosts', '/tmp/zhuji')  # cp /etc/hosts /tmp/zhuji
'/tmp/zhuji'

>>> shutil.copy2('/etc/hosts', '/tmp/zhuji2')  # cp -p /etc/hosts /tmp/zhuji2
'/tmp/zhuji2'

>>> shutil.copytree('/etc/security', '/tmp/security')  # cp -r
'/tmp/security'

>>> shutil.move('/tmp/security', '/var/tmp/anquan')  # mv
'/var/tmp/anquan'

>>> shutil.rmtree('/var/tmp/anquan')  # rm -rf

>>> shutil.chown('/tmp/zhuji', user='student', group='student')  # chown

# 查看帮助
>>> help(shutil)
>>> help(shutil.chown)
# 官方文档：https://docs.python.org/zh-cn/3/library/index.html
```

## subprocess模块

用于执行系统命令

```python
# 只要记住以下形式即可
>>> import subprocess
>>> result = subprocess.run('ls ~', shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
# 'ls ~'  -> 要执行的命令
# shell=True   -> 在shell环境中运行命令
# stdout=subprocess.PIPE  -> 固定写法，用于将输出保存到stdout中
# stderr=subprocess.PIPE  -> 固定写法，用于将错误保存到stderr中
>>> result  # 可以看到result的各种属性
>>> result.args
'ls ~'
>>> result.returncode   # 返回值，即$?
0
>>> result.stdout.decode()  # stdout是bytes类型，转为str类型
>>> result.stderr.decode()  # stderr是bytes类型，转为str类型

>>> result = subprocess.run('id tom', shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
>>> result.returncode
1
>>> result.stderr.decode()
'id: tom: no such user\n'
```

### python语法风格

```python
# 链式多重赋值
>>> x = y = 10
>>> id(x)  # 查看变量在内存中的地址
9360736
>>> id(y)
9360736

>>> l1 = l2 = [1, 2, 3]
>>> id(l1)
140338008994056
>>> id(l2)
140338008994056
>>> l1
[1, 2, 3]
>>> l2
[1, 2, 3]
>>> l2.append(10)
>>> l2
[1, 2, 3, 10]
>>> l1
[1, 2, 3, 10]

# 多元赋值
>>> a, b = 1, 2
>>> c, d = 'mn'
>>> d, f = (100, 200)
>>> g, h = ['tom', 'jerry']
>>> a, b = b, a   # 两个变量的值互换
>>> a
1
>>> b
2

```









