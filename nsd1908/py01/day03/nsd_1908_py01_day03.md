# nsd_1908_py01_day03

## 文件

文件操作的步骤：打开、读写、关闭

### 读取文本文件

```python
(nsd1908) [root@room8pc16 day03]# cp /etc/passwd /tmp/
>>> f = open('/tmp/passwd')  # 默认以r方式打开
>>> data = f.read()   # 默认读取全部内容
>>> print(data)
>>> data = f.read()   # 继续向后读取
>>> data
''
>>> f.close()

>>> f = open('/tmp/passwd')
>>> f.read(4)  # 指定一次最多读取的字节数
'root'
>>> f.read(4)
':x:0'
>>> f.readline()  # 继续向后读取一行
':0:root:/root:/bin/bash\n'
>>> f.readlines()  # 继续向后读取，将所有的行读取到列表中
>>> f.close()

# ***重要：以下方法是最常用的遍历文件文件的方法***
>>> f = open('/tmp/passwd')
>>> for line in f:
...   print(line, end='')
>>> f.close()
```

### 读取非文本文件

```python
>>> f = open('/tmp/aaa.jpg', 'rb')  # b表示bytes
>>> f.read(5)   # 读取5字节
b'\xff\xd8\xff\xe0\x00'    # 前面的b表示bytes
# 2进制与16进制互转：4个2进制数转换成一个16进制数
# 0000 -> 0; 0001 -> 1; 0010 -> 2; 0011 -> 3; 0100-> 4
# 1110 -> e; 1111 -> f;
>>> f.read(4096)  # 建议一次读4K或4K的倍数
>>> f.close()
```

### 写入文本文件

```python
>>> f = open('/tmp/a.txt', 'w')
>>> f.write('hello world!\n')   # 将字符串写入文件
13   # 共写入13字节
(nsd1908) [root@room8pc16 day03]# cat /tmp/a.txt   # 文件为空
>>> f.flush()  # 立即将缓存数据同步至磁盘
(nsd1908) [root@room8pc16 day03]# cat /tmp/a.txt 
hello world!
# 将字符串列表中的每个记录写到文件
>>> f.writelines(['2nd line.\n', '3rd line.\n'])
>>> f.close()
(nsd1908) [root@room8pc16 day03]# cat /tmp/a.txt 
hello world!
2nd line.
3rd line.
```









